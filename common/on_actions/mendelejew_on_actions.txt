#########################
# MENDELEJEW ON ACTIONS #
#########################

#by Marco Dandolo & Lord R

######################

on_acquired_technology = {
	on_actions = {
		mendelejew_on_acquired_technology
	}
}

mendelejew_on_acquired_technology = {
	events = {
		mendelejew.11 #Mendelejew 11: An Explosive Business
		mendelejew.12 #Mendelejew 12: [SCOPE] found the cause for the Fraunhofer Lines
		mendelejew.13 #Mendelejew 13: A Radiant Element
	}
}

mendelejew_on_yearly_pulse_country = {
	effect = {
		if = {
			limit = { #Should only be executed once and not by every country. Global var checks for that.
				NOT = { has_global_variable = mendelejew_character_death_limiter_global_var }
			}

			#This is used to keep the effect from getting executed by multiple countries
			set_global_variable = {
				name = mendelejew_character_death_limiter_global_var
				months = 11
			}

			#Death Event for Berzelius
			if = {
				limit = {
					year >= 1848
					year < 1853
					any_character_in_void = {
						has_template = mr_swe_berzelius_jacob_character_template
					}
				}
				random_character_in_void = {
					limit = {
						has_template = mr_swe_berzelius_jacob_character_template
					}
					if = {
						limit = {
							owner ?= {
								var:mendelejew_chemist_var ?= {
									has_template = mr_swe_berzelius_jacob_character_template
								}
							}
						}
						owner = {
							trigger_event = mendelejew.990 #Mendelejew 990: Berzelius Death
						}
					}
					else = { #Otherwise he just dies.
						kill_character = yes
					}
				}
			}
		}
	}
}